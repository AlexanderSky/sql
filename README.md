## chiDB SQL Parser

This is a SQL Parser and compiler frontent which can parse a reasonably large subset of SQL. The parser is generated by lex and yacc, and all other code is in C. The parser generates an abstract syntax tree (AST) representation of SQL, which is based on Relational Algebra, extended to fit closer with SQL. This extended relational algebra is termed SRA (sugared relational algebra), as it itself can be compiled into more or less pure relational algebra.

### Example
Consider the following SQL query:

```sql

SQL:
select f.a as Col1, g.a as Col2 from Foo f, Foo g where Col1 != Col2;

```

The parser will create an AST which looks like this:

```
Project([(f,a,Col1), (g,a,Col2)],
   Select(Col1 != Col2,
      Join([(Foo,f), (Foo,g)])
   )
)
```

The desugaring step will produce a Relational Algebra tree:

```
Pi([Col1, Col2],
   Sigma(Col1 != Col2,
      Cross(
         Rho(Foo, f, [Col1]),
         Rho(Foo, g, [Col2])
      )
   )
)
```

Since relational algebra primarily deals with only queries, there are separate data structures to deal with `Create Table`, `Create Index`, `Insert Into`, and `Delete From` commands (and possibly other things in the future). These don't use RA, but they do, for example, use the Expression part of the abstract syntax tree.

## Installation and Usage (*nix operating systems)

Clone into the git repository:

```
> git clone https://github.com/thinkpad20/sql.git
```

Compile:

```
> cd sql
> make
```

See some example tests with

```
> make test
```

Parse an arbitrary SQL file with

```
> bin/sql_parser <filename>
```